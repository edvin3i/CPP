#############################################################################
#                            Name                                            #
#############################################################################

NAME        =   RPN

#############################################################################
#                            Directories                                     #
#############################################################################

MDIR        =
INCDIR      =   includes
OBJDIR      =   .obj/

#############################################################################
#                            Files                                           #
#############################################################################

MFLS        =	RPN.cpp main.cpp
MSRC        =   $(addprefix $(MDIR), $(MFLS))
MOBJS       =   $(MSRC:.cpp=.o)
MOBJS       :=  $(addprefix $(OBJDIR), $(notdir $(MOBJS)))

#############################################################################
#                            Compiler settings                              #
#############################################################################

CXX				=   c++
CXXFLAGS		=   -std=c++98 -Wall -Werror -Wextra -MMD -MP -g
CXXFLAGS		+=  -I$(INCDIR)

#############################################################################
#                            Makefile Dependency                            #
#############################################################################

MKFL		=   Makefile

#############################################################################
#                            Clean up                                       #
#############################################################################

RM          =   rm -rf

#############################################################################
#                            Rules                                          #
#############################################################################

all:            $(NAME)

-include $(MOBJS:.o=.d)

$(OBJDIR)%.o:   %.cpp
				@mkdir -p $(OBJDIR)
				@$(CXX) $(CXXFLAGS) -c $< -o $@

$(NAME):        $(MOBJS) $(MKFL)
				@echo "\e[35mCompiling\e[0m $(*F)"
				@$(CXX) $(MOBJS) -o $(NAME)
				@echo "\e[32mDone!\e[0m"

clean:
				@$(RM) $(OBJDIR)

fclean:         clean
				@$(RM) $(NAME)

re:             fclean all

.PHONY:         all clean fclean re
