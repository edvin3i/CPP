#############################################################################
#                            Name                                            #
#############################################################################

NAME        =   account

#############################################################################
#                            Directories                                     #
#############################################################################

MDIR        =
INCDIR      =   includes
OBJDIR      =   .obj/

#############################################################################
#                            Files                                           #
#############################################################################

MFLS        =   Account.cpp tests.cpp
MSRC        =   $(addprefix $(MDIR), $(MFLS))
MOBJS       =   $(MSRC:.cpp=.o)
MOBJS       :=  $(addprefix $(OBJDIR), $(notdir $(MOBJS)))

#############################################################################
#                            Compiler settings                              #
#############################################################################

CC          =   c++
CFLAGS      =   -Wall -Werror -Wextra -std=c++98 -MMD -MP # -g
CFLAGS      +=  -I$(INCDIR)

#############################################################################
#                            Makefile Dependency                            #
#############################################################################

MKFL		=   Makefile

#############################################################################
#                            Clean up                                       #
#############################################################################

RM          =   rm -rf

#############################################################################
#                            Rules                                          #
#############################################################################

all:            $(NAME)

-include $(MOBJS:.o=.d)

$(OBJDIR)%.o:   %.cpp
				@mkdir -p $(OBJDIR)
				@$(CC) $(CFLAGS) -c $< -o $@

$(NAME):        $(MOBJS) $(MKFL)
				@echo "\e[35mCompiling\e[0m $(*F)"
				@$(CC) $(MOBJS) -o $(NAME)
				@echo "\e[32mDone!\e[0m"

clean:
				@$(RM) $(OBJDIR)

fclean:         clean
				@$(RM) $(NAME)

re:             fclean all

.PHONY:         all clean fclean re
